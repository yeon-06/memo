### JPA의 중요 기능

1. 영속성 컨텍스트
2. 객체 - RDB 매핑

### 영속성 컨텍스트란?

- Entity를 영구 저장하는 환경
- 논리적인 개념으로 눈에 보이는 것이 아님
- `EntityManager`를 통해 영속성 컨텍스트에 접근 가능 

> `EntityManger.persist(entity)`는 DB에 저장하는 것이 아니다.  
> 영속성 컨텍스트에 저장하는 것이다.

### 장점

- 1차 캐시 지원
- 동일성 보장 (==)
- 트랜잭션을 지원하는 쓰기 지연
- 더티 체킹
- 지연 로딩

### flush

- 영속성 컨텍스트의 변경 내용을 DB에 반영
- 영속성 컨텍스트를 비우는 clear와는 다른 기능
- 트랜잭션 커밋이나 jpql 쿼리 실행 시 자동으로 호출

### 엔티티의 생명주기

- 비영속
- 영속
- 준영속: 영속성 컨텍스트에 저장되었다가 **분리**된 상태
  - `.detach(entity)`: 엔티티만 영속성 컨텍스트에서 분리
  - `.clear()`: 영속성 컨텍스트 초기화
  - `.close()`: 영속성 컨텍스트 종료
- 삭제
