## ê°€ìƒ ë©”ëª¨ë¦¬
- ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ë¥¼ ê³ ë ¤í•  í•„ìš” ì—†ì´ ê°€ì •í•œ ìê¸° ìì‹ ë§Œì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œ ê³µê°„
- ë©”ëª¨ë¦¬ ì ì¬ ë‹¨ìœ„ì— ë”°ë¼ `ìš”êµ¬ í˜ì´ì§•`, `ìš”êµ¬ ì„¸ê·¸ë¨¼í…Œì´ì…˜ ë°©ì‹`ìœ¼ë¡œ êµ¬í˜„
    - `ìš”êµ¬ ì„¸ê·¸ë¨¼í…Œì´ì…˜ ë°©ì‹`: í•˜ë‚˜ì˜ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì—¬ëŸ¬ ê°œì˜ í˜ì´ì§€ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” í˜ì´ì§€ë“œ ì„¸ê·¸ë¨¼í…Œì´ì…˜ ê¸°ë²• ì‚¬ìš©í•  ë•Œ ì´ìš©

### ìš”êµ¬ í˜ì´ì§•; Demand Paging
- CPUì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¨ í›„ì—ì•¼ í•´ë‹¹ í˜ì´ì§€ë¥¼ ë©”ëª¨ë¦¬ì— ì ì¬
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ â†“
- í”„ë¡œì„¸ìŠ¤ ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ëŠë¼ ì†Œìš”ë˜ëŠ” ì…ì¶œë ¥ ì˜¤ë²„í—¤ë“œ â†“
- ë” ë§ì€ í”„ë¡œì„¸ìŠ¤ ìˆ˜ìš©
- `Valid-Invalid Bit`; `ìœ íš¨-ë¬´íš¨ ë¹„íŠ¸`
    - ê° í˜ì´ì§€ê°€ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ëŠ”ì§€ í‘œì‹œ
    - í˜ì´ì§€ í…Œì´ë¸”ì˜ ê° í•­ëª©ë³„ë¡œ ì €ì¥ (invalidë¡œ ì´ˆê¸°í™”)
    - `Invalid`: ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì£¼ì†Œ ì˜ì—­ or í˜ì´ì§€ê°€ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì— ì—†ìŒ
    - ë¬´íš¨ë¡œ ì„¸íŒ…ë˜ì–´ ìˆìœ¼ë©´ `page fault`ë¼ê³  ë¶ˆë¦¼
- í˜ì´ì§€ ë¶€ì¬ â†“ -> ì„±ëŠ¥ â†‘

#### í˜ì´ì§€ ë¶€ì¬; page fault
![page fault pocess](../images/page_fault.png)
1. CPUê°€ ë¬´íš¨ í˜ì´ì§€ ì ‘ê·¼ ì‹œ `MMU`ê°€ í˜ì´ì§€ ë¶€ì¬ íŠ¸ë© ë°œìƒ
2. CPUì˜ ì œì–´ê¶Œ `ì»¤ë„ ëª¨ë“œ`ë¡œ ì „í™˜
3. `í˜ì´ì§€ ë¶€ì¬ ì²˜ë¦¬ë£¨í‹´` í˜¸ì¶œ
    - ìœ íš¨í•œ ì ‘ê·¼ì¸ì§€ ì²´í¬
    - ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì—ì„œ ë¹ˆ í”„ë ˆì„ì„ í• ë‹¹ë°›ê¸° (ì—†ìœ¼ë©´ ëºì–´ì˜´ -> Page Replacement)
    - í•´ë‹¹ í˜ì´ì§€ë¥¼ ë””ìŠ¤í¬ì—ì„œ ë©”ëª¨ë¦¬ë¡œ ì½ê¸°
      - ë””ìŠ¤í¬ I/O ì¢…ë£Œ ì „ê¹Œì§€ í”„ë¡œì„¸ìŠ¤ëŠ” PCUë¥¼ ì„ ì ë‹¹í•¨ (block)
      - ë””ìŠ¤í¬ ì½ê¸°ê°€ ëë‚˜ë©´ page tables entry ê¸°ë¡, valid-invalid bit = `valid`
      - ready queueì— í”„ë¡œì„¸ìŠ¤ ì‚½ì…
    - ì´ í”„ë¡œì„¸ìŠ¤ê°€ CPUë¥¼ ì¡ê³  ë‹¤ì‹œ running
    - ì¤‘ë‹¨ë˜ì—ˆë˜ ëª…ë ¹ ë§ˆì € ì‹¤í–‰

### Page Replacement; í˜ì´ì§€ êµì²´
- ë¹ˆ í”„ë ˆì„ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° ì–´ë–¤ í”„ë ˆì„ì„ ëºì„ì§€ ê²°ì •í•´ì•¼ í•¨  
  (= ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì˜¨ í˜ì´ì§€ ì¤‘ í•˜ë‚˜ë¥¼ `swap-out`í•´ ë©”ëª¨ë¦¬ ë¹ˆ ê³µê°„ í™•ë³´)
- ê³§ë°”ë¡œ ì‚¬ìš©ë˜ì§€ ì•Šì„ í˜ì´ì§€ë¥¼ ì«“ì•„ë‚´ëŠ” ê²ƒì´ ì¢‹ìŒ
- ë™ì¼ í˜ì´ì§€ê°€ ì—¬ëŸ¬ ë²ˆ ë©”ëª¨ë¦¬ì—ì„œ ì«“ê²¨ë‚¬ë‹¤ ëŒì•„ì˜¬ ìˆ˜ ìˆìŒ
- `Page Replacement`ì˜ ì•Œê³ ë¦¬ì¦˜ì€ `page-fault rate`ì˜ ìµœì†Œí™”ê°€ ëª©ì 

#### Optimal Algorithm
- = `MIN Algorithm`; `OPT Algorithm`; `Belady's Optimal Algorithm`
- `MIN` (OPT): ê°€ì¥ ë¨¼ ë¯¸ë˜ì— ì°¸ì¡°ë˜ëŠ” í˜ì´ì§€ë¥¼ replace
- ë¯¸ë˜ì˜ ì°¸ì¡°ë¥¼ ì•Œê³  ìˆë‹¤ëŠ” ê°€ì • í•˜ì— ë§Œë“¤ì–´ì§„ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì‹¤ì œ ì‚¬ìš©í•˜ê¸°ëŠ” ì–´ë ¤ì›€  
  -> ë‹¤ë§Œ ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ì˜ ì„±ëŠ¥ì— ëŒ€í•œ Upper Bound ì œê³µ

#### FIFO Algorithm
- First In First Out
- `FIFO Anomaly` ë°œìƒ: í”„ë ˆì„ â†‘ -> page fault â†‘

#### LRU Algorithm
- Least Recently Used
- ê°€ì¥ ì˜¤ë˜ ì „ì— ì°¸ì¡°ëœ ê²ƒì„ ì‚­ì œ
- O(1) ê°€ì¥ ìµœê·¼ ì°¸ì¡°ë§Œ ì•Œë©´ ë¨

#### LFU Algorithm
- Least Frequently Used
- ì°¸ì¡° íšŸìˆ˜ê°€ ê°€ì¥ ì ì€ í˜ì´ì§€ ì‚­ì œ
- ìµœì € ì°¸ì¡° íšŸìˆ˜ê°€ ì—¬ëŸ¿ì¸ ê²½ìš°
  - ì—¬ëŸ¬ í˜ì´ì§€ ì¤‘ ì„ì˜ ë¡œ ì„ ì •
  - ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ ê°€ì¥ ì˜¤ë˜ ì „ì— ì°¸ì¡°ëœ í˜ì´ì§€ ì‚­ì œ ê°€ëŠ¥
- ì°¸ì¡° ì‹œì ì˜ ìµœê·¼ì„± ë°˜ì˜ ëª»í•¨  
  (ë¯¸ë˜ì— ì—¬ëŸ¬ë²ˆ í˜¸ì¶œë  ì˜ˆì •ì¸ë° í˜„ì¬ê¹Œì§€ì˜ ì°¸ì¡°ë§Œ íŒë‹¨í•´ì„œ ì‚­ì œë  ìˆ˜ ìˆìŒ)
- O(n) ì°¸ì¡° íšŸìˆ˜ ë¹„êµ í•„ìš” (`heap` ì´ìš©í•´ êµ¬í˜„í•˜ë©´ O(logN))
- í˜ì´ì§€ ì°¸ì¡° íšŸìˆ˜ë¥¼ ê³„ì‚°í•˜ëŠ” ë°©ì‹ì— ë”°ë¼
  - Incache-LFU: ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ì˜¬ë¼ì˜¨ í›„ì˜ ì°¸ì¡° íšŸìˆ˜ë§Œ ì¹´ìš´íŠ¸ (ì«“ê²¨ë‚¬ë‹¤ ë‹¤ì‹œ ë“¤ì–´ì˜¤ë©´ 0)
  - Perfect-LFU: ê³¼ê±° ì´ ì°¸ì¡° íšŸìˆ˜

> **LRU, LFU ì•Œê³ ë¦¬ì¦˜ì€ ì‹¤ì œ ì‚¬ìš©ì€ ë¶ˆê°€ëŠ¥**í•˜ë‹¤.  
> ğŸ‘‰ í˜ì´ì§€ í´íŠ¸ê°€ ì¼ì–´ë‚˜ëŠ” í˜ì´ì§€ëŠ” `List` í˜•íƒœì˜ ì¤„ì˜ ê°€ì¥ ì•„ë˜ì— ìœ„ì¹˜ì‹œí‚¤ë©´ ëœë‹¤.  
> ì´ë¯¸ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ëŠ” í˜ì´ì§€ë“¤ì€ ì‚¬ìš©ì í”„ë¡œê·¸ë¨ì—ì„œ ë°”ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.  
> ì¦‰, OSì˜ ê°œì…ì´ ì—†ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì¤„ ìœ„ì¹˜ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥

#### Clock Algorithm
- = `NUR`; `Not Used Recently` = `NRU`; `Not Recently Used` = `Second chance Algorithm`
- `LRU`ì™€ ë¹„ìŠ·í•œ ì•Œê³ ë¦¬ì¦˜
- `reference bit`
  - í˜ì´ì§€ê°€ ì°¸ì¡°ë˜ë©´ í•˜ë“œì›¨ì–´ì— ì˜í•´ 1ë¡œ ì„¸íŒ…
  - ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ í•˜ë‚˜ì”© ì´ë™í•˜ë©° 1 -> 0 ë³€ê²½
  - ì•Œê³ ë¦¬ì¦˜ì´ 0 ì°¾ìœ¼ë©´ í•´ë‹¹ í˜ì´ì§€ êµì²´
  - ìì£¼ ì‚¬ìš©ë˜ëŠ” í˜ì´ì§€ë¼ë©´ second chanceì—ì„œ 1ì¼ ê²ƒ  
    (second chance: í•œë°”í€´ ë‹¤ ëˆ í›„ ë‘ë²ˆì§¸ë¡œ ì ‘ê·¼)
- `modified bit`; `dirty bit`
  - 1: ìµœê·¼ì— ë³€ê²½ëœ í˜ì´ì§€ (I/O ë™ë°˜ í˜ì´ì§€)
  - í˜ì´ì§€ êµì²´ ë‹¹í•  ë•Œ ë³€ê²½ ì‚¬í•­ì„ ë©”ëª¨ë¦¬ì— ë°˜ì˜í•˜ê³  êµì²´ ë‹¹í•¨

> **ìºìŠ ê¸°ë²•**
> - í•œì •ëœ ë¹ ë¥¸ ê³µê°„(cache)ì— ìš”ì²­ëœ ë°ì´í„°ë¥¼ ì €ì¥í•´ë‘ì—ˆë‹¤ í›„ì† ìš”ì²­ ì‹œ cacheê°€ ì§ì ‘ ì„œë¹„ìŠ¤
> - í˜ì´ì§• ê¸°ë²• ë¿ ì•„ë‹ˆë¼ cache memory, buffer caching, web caching ë“± ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©
> - êµì²´ ì•Œê³ ë¦¬ì¦˜ì—ì„œ ì‚­ì œí•  í•­ëª©ì„ ê²°ì •í•˜ëŠ” ì¼ì— ì§€ë‚˜ì¹˜ê²Œ ë§ì€ ì‹œê°„ì´ ê±¸ë¦¬ë©´ ì‹¤ì œ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš© X
> - `Buffer caching`, `Web caching`ì˜ ê²½ìš°
>     - O(1) ~ O(logN)
> - `Paging System`ì˜ ê²½ìš°
>     - `page fault`ì¸ ê²½ìš°ì—ë§Œ OSê°€ ê´€ì—¬
>     - í˜ì´ì§€ê°€ ì´ë¯¸ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ëŠ” ê²½ìš° ì°¸ì¡° ì‹œê° ë“±ì˜ ì •ë³´ë¥¼ OSê°€ ì•Œ ìˆ˜ ì—†ìŒ
>     - O(1) LRUì˜ list ì¡°ì‘ì¡°ì°¨ ë¶ˆê°€ëŠ¥

### Allocation Problem
- ê° í”„ë¡œì„¸ìŠ¤ì— ì–¼ë§Œí¼ì˜ page frameì„ í• ë‹¹í•  ê²ƒì¸ê°€?
- ëª…ë ¹ì–´ ìˆ˜í–‰ì„ ìœ„í•´ í• ë‹¹ë˜ì–´ì•¼ í•˜ëŠ” ìµœì†Œí•œì˜ í”„ë ˆì„ ìˆ˜ ì¡´ì¬
- ë£¨í”„ í˜•íƒœì˜ í˜ì´ì§€(`Clock Algorithm`ê°™ì€)ë“¤ì€ í•œêº¼ë²ˆì— allocate ë˜ëŠ” ê²ƒì´ ìœ ë¦¬
  - ìµœì†Œí•œì˜ allocation ì—†ìœ¼ë©´ ë§¤ ë£¨í”„ë§ˆë‹¤ `page fault` ë°œìƒ
- í• ë‹¹ ì•Œê³ ë¦¬ì¦˜
  - `Equal allocation`: ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì— ë˜‘ê°™ì´ í• ë‹¹
  - `Proportional allocation`: í”„ë¡œì„¸ìŠ¤ í¬ê¸°ì— ë¹„ë¡€í•´ í• ë‹¹
  - `Priority allocation`: í”„ë¡œì„¸ìŠ¤ priorityì— ë”°ë¼ í• ë‹¹

### Global Replacement vs Local Replacement
#### Global Replacement; ì „ì—­ êµì²´
- í• ë‹¹ X
- êµì²´ ì‹œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹ëœ í”„ë ˆì„ ëºì–´ì˜¬ ìˆ˜ ìˆìŒ
- í”„ë¡œì„¸ìŠ¤ ë³„ í• ë‹¹ëŸ‰ ì¡°ì ˆí•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜
- ë¬´í•œ ê²½ìŸ (ì„œë¡œ ëºì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ)
- `LRU`, `LFU`, `í´ëŸ­` ë“±ì˜ ì•Œê³ ë¦¬ì¦˜ì„ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ ë‚´ ì „ì²´ í˜ì´ì§€ í”„ë ˆì„ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ ì ìš©í•˜ëŠ” ê²½ìš°

#### Local Replacement; ì§€ì—­ êµì²´
- ì¼ë‹¨ í• ë‹¹ í›„ í• ë‹¹ëœ frame ë‚´ì—ì„œ replacement
- `FIFO`, `LRU`, `LFU` ì•Œê³ ë¦¬ì¦˜ì„ í”„ë¡œì„¸ìŠ¤ ë³„ë¡œ ìš´ì˜ ì‹œ

### ìŠ¤ë ˆì‹±; Thrashing
- í”„ë¡œì„¸ìŠ¤ ìˆ˜í–‰ì— í•„ìš”í•œ ìµœì†Œ `page frame` ìˆ˜ë¥¼ í• ë‹¹ ë°›ì§€ ëª»í•˜ëŠ” ê²½ìš° ë°œìƒ
- ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ `Working Set`, `PFF` ì•Œê³ ë¦¬ì¦˜ì´ ìˆìŒ

1. í˜ì´ì§€ ë¶€ì¬ìœ¨ â†‘
2. CPU ì´ìš©ë¥  â†“
3. OSëŠ” í”„ë¡œì„¸ìŠ¤ ìˆ˜ê°€ ë„ˆë¬´ ì ë‹¤ ìƒê°í•´ MPD â†‘
4. ê° í”„ë¡œì„¸ìŠ¤ì— í• ë‹¹ë˜ëŠ” ë©”ëª¨ë¦¬ ì–‘ â†“
5. ìµœì†Œí•œì˜ í˜ì´ì§€ í”„ë ˆì„ë„ í• ë‹¹ë°›ì§€ ëª»í•´ í˜ì´ì§€ ë¶€ì¬ ë°œìƒ (ë°˜ë³µ)

> MPD; Multi Programming Degree; ë‹¤ì¤‘ í”„ë¡œê·¸ë˜ë° ì •ë„  
> : ë©”ëª¨ë¦¬ì— ë™ì‹œì— ì˜¬ë¼ê°€ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ ìˆ˜

#### Working-Set Model
Locality of reference
- í”„ë¡œì„¸ìŠ¤ëŠ” íŠ¹ì • ì‹œê°„ ë™ì•ˆ ì¼ì • ì¥ì†Œë§Œì„ ì§‘ì¤‘ì ìœ¼ë¡œ ì°¸ì¡°í•¨
- `Locality Set`: ì§‘ì¤‘ì ìœ¼ë¡œ ì°¸ì¡°ë˜ëŠ” pageë“¤ì˜ ì§‘í•©  

Working-Set Model
- í”„ë¡œì„¸ìŠ¤ì˜ working set ì „ì²´ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì™€ìˆì–´ì•¼ ìˆ˜í–‰ë¨
- ì¼ë¶€ë§Œ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì˜¨ ê²½ìš° ëª¨ë“  frame ë°˜ë‚© í›„ swap out
- Working Setì„ ê²°ì •í•˜ê¸° ìœ„í•´  Working Set Window ì‚¬ìš©
- ê³¼ê±°ì— n ì‹œê°„ ë™ì•ˆ ì‚¬ìš©í•œ í˜ì´ì§€ë“¤ì„ ë©”ëª¨ë¦¬ì— í• ë‹¹
  - ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•´ì„œ Î”ì‹œê°„ ë™ì•ˆ ì‚¬ìš©í•œ í˜ì´ì§€ë“¤ì˜ ì¼ë¶€ë§Œ í• ë‹¹ ê°€ëŠ¥í•œ ìƒí™©ì´ë¼ë©´? -> í• ë‹¹ ë°›ì§€ X  
    (= working setì„ ë³´ì¥í•˜ëŠ” ê²½ìš°ì—ë§Œ í• ë‹¹ì´ ë¨)

> Working Set (=Locality Set)  
> : Localityì— ê¸°ë°˜í•´ í”„ë¡œì„¸ìŠ¤ê°€ ì¼ì • ì‹œê°„ ë™ì•ˆ ì›”í™œíˆ ìˆ˜í–‰ë˜ê¸° ìœ„í•´ í•œêº¼ë²ˆì— ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì™€ ìˆì–´ì•¼ í•˜ëŠ” í˜ì´ì§€ë“¤ì˜ ì§‘í•©

#### PFF Algorithm
- Page Fault Frequency Scheme
- í˜ì´ì§€ ë¶€ì¬ìœ¨ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì¡°ì‚¬í•´ ë©”ëª¨ë¦¬ ì–‘ ì¡°ì ˆ
- `page fault rate` > `ìƒí•œê°’`: frame ì¶”ê°€ í• ë‹¹
- `page fault rate` < `í•˜í•œê°’`: frame í• ë‹¹ â†“
- ë¹ˆ frame ì—†ìœ¼ë©´ ì¼ë¶€ í”„ë¡œì„¸ìŠ¤ swap out

### page sizeì— ëŒ€í•´
- page size â†“
  - í˜ì´ì§€ ìˆ˜ â†‘
  - í˜ì´ì§€ í…Œì´ë¸” í¬ê¸° â†‘
  - Internal fragmentation â†“
  - Disk Transfer íš¨ìœ¨ì„± â†“
    - ëŒ€ê°œ ë©”ëª¨ë¦¬ëŠ” ì¸ì ‘í•œ ìœ„ì¹˜ê°€ ì—°ë‹¬í•  í™•ë¥ ì´ í°í¸
    - ê°™ì€ í˜ì´ì§€ì— ì¡´ì¬í•  ê²½ìš° ìš©ì´í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í–ˆì„ ê²ƒ
  - í•„ìš”í•œ ì •ë³´ë§Œ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì™€ ë©”ëª¨ë¦¬ ì´ìš© íš¨ìœ¨ â†‘
    - Localityì˜ í™œìš© ì¸¡ë©´ì—ì„œëŠ” not good
- íŠ¸ë Œë“œ: ìš”ì¦˜ì€ ë©”ëª¨ë¦¬ í¬ê¸°ê°€ ì ì  ë” ì»¤ì ¸ì„œ page sizeë„ â†‘