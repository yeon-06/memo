## LeaderEpoch
- : 컨트롤러가 관리하는 32bit 숫자
- 카프카 파티션들이 복구 동작을 할 때 메시지 일관성을 유지하기위해 이용
- 복구 동작 시 하이워터마크 대체 수단으로도 활용

### 리더에포크가 없다면
1. 프로듀서 -> 리더 메시지 전달
2. 리더 -> 팔로워 리플리케이션 (메시지 저장)
3. 리더 하이워터마크 올리기
4. 이후에 리더 -> 팔로워 요청 발생 시 하이워터마크 변경을 감지되면 팔로워도 하이워터마크 1 올림
5. 만약 하이워터마크 변경을 감지하기 전에 예상치 못한 장애 발생 시 복구 동작.  
현재 하이워터마크보다 높은 메시지 삭제 후 해당 팔로워가 리더로 변경된다면? -> 메시지 손실 가능

### 리더에포크 사용시
- 복구 과정이 약간 달라진다
1. 리더에게 리더에포크 요청
2. 해당 응답값을 이용해 메시지의 삭제 여부를 결정하고 하이워터마크 조정
